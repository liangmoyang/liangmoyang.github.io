import{_ as e,o,c as i,R as l}from"./chunks/framework.LBXiIpgL.js";const b=JSON.parse('{"title":"索引之优化手段","description":"","frontmatter":{},"headers":[],"relativePath":"sql/mysql-index-optimize.md","filePath":"sql/mysql-index-optimize.md"}'),a={name:"sql/mysql-index-optimize.md"},t=l('<h1 id="索引之优化手段" tabindex="-1">索引之优化手段 <a class="header-anchor" href="#索引之优化手段" aria-label="Permalink to &quot;索引之优化手段&quot;">​</a></h1><h2 id="索引下推" tabindex="-1">索引下推 <a class="header-anchor" href="#索引下推" aria-label="Permalink to &quot;索引下推&quot;">​</a></h2><p>指将部分上层（服务层）负责的事情，交给下层（引擎层）去处理。目的是减少回表次数，等同于减少了IO操作。 由系统参数<code>optimizer_switch</code>控制，默认开启。 查看执行计划：<code>explain</code> <code>Extra列</code>：<code>Using index condition</code></p><h2 id="索引合并" tabindex="-1">索引合并 <a class="header-anchor" href="#索引合并" aria-label="Permalink to &quot;索引合并&quot;">​</a></h2><ol><li>取交集</li><li>取并集</li><li>排序后取并集</li></ol><h2 id="索引失效" tabindex="-1">索引失效 <a class="header-anchor" href="#索引失效" aria-label="Permalink to &quot;索引失效&quot;">​</a></h2><ol><li>不符合<b>最左前缀匹配原则</b>：<code>like %文本</code>或者使用联合索引的过程中遇到了无序的情况。</li><li>索引列使用了<b>表达式</b>或者<b>函数操作</b>。</li><li>隐式转换。（某些orm框架自动填入的参数，会造成变量字段和相应类型不匹配，造成mysql<b>隐式转换</b>，调用函数造成索引失效）</li><li>字符串类型不加引号会导致索引失效（内部会做类型转换操作）。</li><li>负面条件不能使用索引：<code>!=</code> <code>&lt;&gt;</code> <code>not</code>等。</li><li>注意范围条件的使用</li><li>null值会导致复合索引失效。</li><li><code>is null</code>以及<code>is not null</code>无法使用索引</li><li>MySQL自身的统计数据差距多大</li></ol><h2 id="优化" tabindex="-1">优化 <a class="header-anchor" href="#优化" aria-label="Permalink to &quot;优化&quot;">​</a></h2><ol><li><code>union</code> <code>in</code> <code>or</code> 都能命中，效率上：<code>union</code> &gt; <code>in</code> &gt; <code>or</code><ol><li>数据量太少的话，使用or可能不会使用索引</li></ol></li><li>尽量覆盖索引</li><li><code>order by</code> 、<code>group by</code> 的场景，可以与索引配合</li><li>单表中索引列的数量不宜过多</li><li>更新频繁、区分度不高的列不适宜建立索引。</li></ol><h2 id="文章推荐-参考" tabindex="-1">文章推荐/参考 <a class="header-anchor" href="#文章推荐-参考" aria-label="Permalink to &quot;文章推荐/参考&quot;">​</a></h2><ul><li><a href="https://juejin.cn/post/7005794550862053412" target="_blank" rel="noreferrer">五分钟搞懂MySQL索引下推</a></li></ul>',11),d=[t];function c(r,n,s,h,_,m){return o(),i("div",null,d)}const p=e(a,[["render",c]]);export{b as __pageData,p as default};
